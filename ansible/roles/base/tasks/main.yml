---
- name: Copy pacman configuration file
  copy:
    src: pacman.conf
    dest: /etc/pacman.conf

- name: Refresh pacman mirrors
  pacman:
    update_cache: yes

- name: Set the hostname
  hostname:
    name: "{{ hostname }}"
  when: hostname is defined

- import_tasks: user.yml
- import_tasks: sudo.yml
- import_tasks: packages.yml
- import_tasks: shell.yml
- import_tasks: journal.yml

- name: Setup provision command
  file:
    src: "/home/{{ user.name }}/{{ dotfiles.source }}/provision"
    dest: /usr/local/bin/provision
    state: link
